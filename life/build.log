Sending build context to Docker daemon  150.5kB
Step 1/18 : FROM nginx:1.17.8-alpine as builder
 ---> 48c8a7c47625
Step 2/18 : COPY src /life-game/src
 ---> 8ec2573c063c
Step 3/18 : COPY public /life-game/public
 ---> 1e565543829e
Step 4/18 : COPY package.json /life-game/package.json
 ---> 1d2271aaed64
Step 5/18 : RUN  apk add --update nodejs npm && cd life-game  && npm install && npm run build
 ---> Running in 6b9cd5859696
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz
(1/8) Installing ca-certificates (20191127-r2)
(2/8) Installing c-ares (1.15.0-r0)
(3/8) Installing libgcc (8.3.0-r0)
(4/8) Installing http-parser (2.9.2-r0)
(5/8) Installing libstdc++ (8.3.0-r0)
(6/8) Installing libuv (1.29.1-r0)
(7/8) Installing nodejs (10.19.0-r0)
(8/8) Installing npm (10.19.0-r0)
Executing busybox-1.30.1-r3.trigger
Executing ca-certificates-20191127-r2.trigger
OK: 82 MiB in 45 packages
[91mnpm[0m[91m WARN deprecated[0m[91m urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
[0m[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.
[0m[91mnpm WARN deprecated @types/testing-library__dom@7.5.0: This is a stub types definition. testing-library__dom provides its own type definitions, so you do not need this installed.
[0m[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
[0m[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
[0m[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.
[0m[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()
[0m[91mnpm WARN deprecated core-js@2.6.11: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.
[0m
> core-js@2.6.11 postinstall /life-game/node_modules/babel-runtime/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m


> core-js@3.6.5 postinstall /life-game/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m


> core-js-pure@3.6.5 postinstall /life-game/node_modules/core-js-pure
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m

[91mnpm notice[0m[91m created a lockfile as package-lock.json. You should commit this file.
[0m[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/react-scripts/node_modules/fsevents):
npm [0m[91mWARN notsup[0m[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/jest-haste-map/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91mnpm WARN notsup Unsupported engine for watchpack-chokidar2@2.0.0: wanted: {"node":"<8.10.0"} (current: {"node":"10.19.0","npm":"6.13.4"})
npm [0m[91mWARN notsup[0m[91m Not compatible with your version of node/npm: watchpack-chokidar2@2.0.0
[0m[91mnpm WARN[0m[91m [0m[91moptional[0m[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/watchpack-chokidar2/node_modules/chokidar/node_modules/fsevents):
[0m[91mnpm [0m[91mWARN[0m[91m notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91mnpm[0m[91m WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/webpack-dev-server/node_modules/chokidar/node_modules/fsevents):
[0m[91mnpm[0m[91m WARN[0m[91m [0m[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91mnpm [0m[91mWARN tsutils@3.17.1 requires a peer of typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta but none is installed. You must install peer dependencies yourself.
[0m[91m
[0madded 1653 packages from 795 contributors and audited 1657 packages in 57.002s

58 packages are looking for funding
  run `npm fund` for details

found 4982 low severity vulnerabilities
  run `npm audit fix` to fix them, or `npm audit` for details

> lifegame@0.1.0 build /life-game
> react-scripts build

Creating an optimized production build...
Compiled successfully.

File sizes after gzip:

  51.54 KB  build/static/js/2.b9015272.chunk.js
  12.95 KB  build/static/js/main.8e739486.chunk.js
  2.45 KB   build/static/css/main.88db7cd2.chunk.css
  772 B     build/static/js/runtime-main.a74fd732.js

The project was built assuming it is hosted at /.
You can control this with the homepage field in your package.json.

The build folder is ready to be deployed.
You may serve it with a static server:

  npm install -g serve
  serve -s build

Find out more about deployment here:

  bit.ly/CRA-deploy

Removing intermediate container 6b9cd5859696
 ---> 3f73e50c849d
Step 6/18 : FROM nginx:1.17.8-alpine
 ---> 48c8a7c47625
Step 7/18 : COPY srvapi /srvapi
 ---> Using cache
 ---> 3adf4949f5f0
Step 8/18 : RUN  echo 'http://dl-cdn.alpinelinux.org/alpine/v3.9/main' >> /etc/apk/repositories
 ---> Using cache
 ---> 71fba00eb8eb
Step 9/18 : RUN  echo 'http://dl-cdn.alpinelinux.org/alpine/v3.9/community' >> /etc/apk/repositories
 ---> Using cache
 ---> cb4cecb96dc7
Step 10/18 : RUN  apk update
 ---> Using cache
 ---> 817fd74b7101
Step 11/18 : RUN  apk add mongodb
 ---> Using cache
 ---> 0ea434728de5
Step 12/18 : RUN  apk add --update nodejs npm && cd srvapi && npm install
 ---> Using cache
 ---> 469fe849ce57
Step 13/18 : COPY entrypoint.sh /entrypoint.sh
 ---> Using cache
 ---> 577024d6e8aa
Step 14/18 : RUN  chmod +x /entrypoint.sh
 ---> Using cache
 ---> 8001b38a537b
Step 15/18 : COPY nginx-srvapi.conf /etc/nginx/conf.d/default.conf
 ---> Using cache
 ---> d73bde949372
Step 16/18 : COPY mongod.conf /etc/mongod.conf
 ---> Using cache
 ---> b07c2d702e4f
Step 17/18 : COPY --from=builder /life-game/build /usr/share/nginx/html
 ---> 0ed711469a67
Step 18/18 : CMD ["/entrypoint.sh" ]
 ---> Running in 4c15375e4738
Removing intermediate container 4c15375e4738
 ---> f8c1670b1631
Successfully built f8c1670b1631
Successfully tagged life-game-content-nginx:latest
